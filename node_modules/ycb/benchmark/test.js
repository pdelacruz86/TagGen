var Benchtable = require('benchtable');
var YCB = require('../index');
var YCBOpt = require('../index_opt');

// mocks
var config = require('./config');
var dims = require('common-dimensions');
var merged = dims.concat(config);

var suite = new Benchtable();

YCBOpt.read(merged, { device: 'smartphone' });
process.exit();

// add tests
suite.addFunction('baseline', function (bundle, context) {
    YCB.read(bundle, context);
})
.addFunction('optimized', function(bundle, context) {
    YCBOpt.read(bundle, context);
})
.addInput('device=smartphone', [ merged, { device: 'smartphone' } ])
.addInput('site=makers', [ merged, { site: 'makers' } ])

// add listeners
.on('cycle', function(event) {
    console.log(String(event.target));
})
.on('complete', function() {
    console.log('Fastest is ' + this.filter('fastest').pluck('name'));
    console.log(this.table.toString());
})

.run({ async: false });
