/*global window*/
'use strict';

/**
 * Utility client lib for applets. This assumes the application has a /build/loader.js file
 * generated by the grunt-td `loaderjs` task.
 *
 * @see https://git.corp.yahoo.com/touchdown/touchdown-v2/blob/master/utils/createClient.js
 */

var loader = require('./build/loader');
var Touchdown = require('touchdown-v2');
var debug = require('debug')('ClientBootstrap');

var ProfileStore = require('tdv2-service-profile/stores/ProfileStore');
var SearchInputStore = require('tdv2-applet-search-input/stores/SearchInputStore');

var td = Touchdown.instance({
    bundleLoader: loader
});

td.getFluxApplication().registerStore(ProfileStore);
td.getFluxApplication().registerStore(SearchInputStore);

var app = td.init(function (err, context) {
    if (err) {
        throw err;
    }
    window.context = context;
    debug('init completed');
});

window.app = app;
