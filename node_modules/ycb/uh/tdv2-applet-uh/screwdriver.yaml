---
jobs:
  component:
    profile: td-applet-v2-component
  pull-request:
    profile: td-applet-v2-pull-request
platform: replicatr_node
shared:
  notifications:
    email: uh-team@yahoo-inc.com
    hipchat:
        - 'Universal Header'
  settings:
    env.APP_ID: tdv2-applet-uh
    env.PIPELINE_COLO: gq1
  steps:
    protractor:
      base_url: 'http://${APP_ID}.trunk.development.manhattan.${PIPELINE_COLO}.yahoo.com'
      port: 4080
    update_dependencies:
      useShrinkwrap: true
    test:
        description: >
            Run your unit tests specified by npm test.  Please
            make sure your test results are published to
            ${TEST_RESULTS_DIR} and coverage statistics going
            to ${COVERAGE_DIR}
        command: |
            ${SOURCE_DIR}/node_modules/grunt-cli/bin/grunt applet_version
            npm run test
    move_test_result:
        description: moving test result files
        command: echo 'do nothing ...'
    publish:
        tag: test
