/* global browser, document, $, it, describe, before */

var chai = require('chai');
var chaiAsPromised = require('chai-as-promised');
var conditions = require('../lib/conditions');
var expect = chai.expect;
var locators = require('../lib/locators');
var when = require('mocha-bdd-when');

chai.use(chaiAsPromised);

describe('#check Menu Tablet', function () {
    before(function () {
        return browser.wait(function () {
            return browser.get('/console?ctrl=TabletHeader&m_id=tdv2-applet-uh&device=tablet').then(function () {
                return true;
            });
        });
    });

    when(conditions['#base']).describe('#base', function () {
        it('should exist', function () {
            var menu = $(locators.MenuMobile);
            browser.waitToBePresent(menu);
            expect(menu.isPresent()).not.to.equal(false);
        });

        it('should add class to docEl when clicked', function () {
            var menu = $(locators.MenuMobile);
            browser.waitToBePresent(menu);

            menu.click().then(function() {
                browser.waitToBePresent($(locators.NavOpen));
                browser.driver.executeScript(function() {
                    return document.documentElement.classList;
                }).then(function(result) {
                    expect(result).to.contain('uh-mobile-nav-open');
                });
            });
        });
    });
});
