/*global require, describe:true, it:true */

'use strict';

var _require = require('root-require');
var expect = require('chai').expect;
var flat = require('flat');
var Immutable = require('immutable');

describe('configs/services/theme and configs/components', function () {
    var data = _require('configs/components/');
    data = Immutable.fromJS(data);

    var master = data.get('master').get(0);
    master = flat(master.toJS());

    var deltas = _require('configs/services/theme/');
    deltas = Immutable.fromJS(deltas);

    var skips = [
        /^settings.*?$/
    ];

    deltas.forEach(function (delta) {
        it (delta.get('settings'), function () {
            var _delta = flat(delta.toJS());

            Object.keys(_delta).forEach(function(key) {
                var isSkipped = false;

                skips.forEach(function (skip) {
                    if (skip.test(key)) {
                        // console.log('[SKIP]', key, _delta[key]);
                        isSkipped = true;
                    }
                });

                if (isSkipped) {
                    return;
                }

                // console.log(key, master[key], _delta[key]);
                expect(Object.keys(master)).to.include(key);
            });
        });
    });
});
