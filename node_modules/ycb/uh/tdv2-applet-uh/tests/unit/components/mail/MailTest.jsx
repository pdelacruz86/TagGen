// TODO: gonna replace by mocha test.
//
// /* global describe, beforeEach, it, jest, expect */
//
// var Mail;
// var React;
// var TestUtils;
// var Immutable;
//
// jest.autoMockOff();
//
// var FlyoutMixin = require('../../../../mixins/FlyoutMixin');
// jest.dontMock('../../../../components/mail/Mail.jsx');
// jest.dontMock('../../../../components/mail/MailPreview.jsx');
// jest.dontMock('../../../../components/mail/MailCount.jsx');
//
// jest.setMock('react-intl', {
//     getIntlMessage: function (key) {
//         return key;
//     }
// });
//
// jest.setMock('touchdown-v2/stores/UserStore', {
//     isSignedIn: function() {
//         return true;
//     },
//     isSignedOut: function() {
//         return false;
//     }
// });
//
// jest.setMock('touchdown-v2/addons/FluxibleMixin', {
//     getStore: function(key) {
//         return key;
//     },
//     executeAction: function() {
//     }
// });
//
// describe('Mail', function() {
//     beforeEach(function() {
//         React = require.requireActual('react/addons');
//         TestUtils = React.addons.TestUtils;
//         Immutable = require.requireActual('immutable');
//
//         var config = Immutable.fromJS({
//             mail: {
//                 compose: {
//                     url: 'https://mrd.mail.yahoo.com/compose'
//                 },
//                 count: {
//                     api: {
//                         protocol: 'https',
//                         host: 'mg.mail.yahoo.com',
//                         path: '/mailservices/v1/newmailcount',
//                         query: {
//                             appid: 'UnivHeader',
//                             wssid: ''
//                         }
//                     },
//                     jsonp: {
//                         timeout: 3000,
//                         prefix: '__uhmc__'
//                     },
//                     maxCountDisplay: 99,
//                     pollingInterval: 2,
//                     pollingDuration: 10
//                 },
//                 mailservices: {
//                     api: {
//                        host: 'mail.yahoo.com',
//                        path: '/',
//                        protocol: 'https',
//                        query: {
//                            '.src': 'ym'
//                        }
//                    }
//                 },
//                 preview: {
//                     api: {
//                         protocol: 'https',
//                         host: 'ucs.query.yahoo.com',
//                         path: '/v1/console/yql',
//                         query: {
//                             format: 'json',
//                             q: 'select messageInfo.receivedDate, messageInfo.mid, messageInfo.flags.isRead, ' +
//                                'messageInfo.from.name, messageInfo.subject from ymail.messages ' +
//                                'where numMid="3" limit 6',
//                             crumb: ''
//                         }
//                     },
//                     fetchInterval: 5000,
//                     jsonp: {
//                         timeout: 3000,
//                         prefix: '__uhmp__'
//                     },
//                     urls: {
//                         message: 'https://mrd.mail.yahoo.com/msg?fid=Inbox&src=hp&mid='
//                     }
//                 },
//                 url: 'https://mail.yahoo.com/'
//             }
//         });
//         var context = {
//             dimensions: {
//                 lang: 'zh-Hant-HK',
//                 site: 'omg',
//                 intl: 'hk'
//             }
//         };
//
//         Mail = (function (Component) {
//             return React.createClass({
//                 mixins: [FlyoutMixin],
//
//                 childContextTypes: {
//                     conf: React.PropTypes.object,
//                     session: React.PropTypes.object
//                 },
//
//                 getChildContext: function() {
//                     return {
//                         conf: config,
//                         session: context
//                     };
//                 },
//
//                 handleMouseEnter: function (e) {
//                     this.setState(
//                         {
//                             hoverState: true
//                         }
//                     );
//                     this.toggleMenu(e);
//                 },
//
//                 handleMouseLeave: function (e) {
//                     this.setState(
//                         {
//                             hoverState: false
//                         }
//                     );
//                     this.toggleMenu(e);
//                 },
//
//                 render: function() {
//                     return <Component />;
//                 }
//             });
//         })(require('../../../../components/mail/Mail.jsx'));
//     });
//
//     it('#render', function() {
//         var mail = TestUtils.renderIntoDocument(
//             <Mail showCount={true} showPreview={true} />
//         );
//
//         TestUtils.isElement(mail);
//         TestUtils.isCompositeComponentWithType(mail, Mail);
//
//         var node = TestUtils.scryRenderedDOMComponentsWithTag(mail, 'a');
//         expect(node.length).toEqual(1);
//
//         mail.handleMouseEnter(this);
//         mail.handleMouseLeave(this);
//
//         /* Test props for mail link */
//         mail = TestUtils.renderIntoDocument(
//             <Mail showCount={true} showPreview={true} mailLink='dummyLink'/>
//         );
//
//         var mailLink = TestUtils.findRenderedDOMComponentWithTag(mail, 'a');
//         expect(mailLink.getDOMNode().getAttribute('href') === 'dummyLink');
//
//         /* negative test */
//         var mail = TestUtils.renderIntoDocument(
//             <Mail showCount={false} />
//         );
//         TestUtils.isElement(mail);
//
//         var mail = TestUtils.renderIntoDocument(
//             <Mail showCount={false} showPreview={true} />
//         );
//         TestUtils.isElement(mail);
//
//         var mail = TestUtils.renderIntoDocument(
//             <Mail showCount={true} showPreview={false} />
//         );
//         TestUtils.isElement(mail);
//     });
// });
