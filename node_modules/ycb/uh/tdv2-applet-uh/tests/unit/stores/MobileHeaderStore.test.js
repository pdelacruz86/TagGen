/*global require, beforeEach, describe, it */
/*jshint -W030, -W097 */
var expect = require('chai').expect;
var Immutable = require('immutable');

var MobileHeaderStore = require('../../../stores/MobileHeaderStore');

describe('stores/MobileHeaderStore.js', function () {
    describe('#store', function () {
        var store;

        beforeEach(function () {
            store = new MobileHeaderStore();
        });

        describe('#handlers', function () {
            it('NAVIGATE_SUCCESS contentSite', function (done) {
                store.on('change', function () {
                    expect(store.getHeaderTitle()).to.be.equal('news');
                    done();
                });
                var payload = Immutable.fromJS({name: 'news',params: {contentSite: 'news', alias: 'Abc-123'}});
                store.setHeaderTitle(payload);
            });
            it('NAVIGATE_SUCCESS topic/category', function (done) {
                store.on('change', function () {
                    expect(store.getHeaderTitle()).to.be.equal('Abc');
                    done();
                });
                var payload = Immutable.fromJS({name: 'topic',params: {contentSite: 'news', alias: 'Abc-123'}});
                store.setHeaderTitle(payload);
            });
            it('GET_STORY_LINES_COUNT_SUCCESS', function (done) {
                store.on('change', function () {
                    expect(store._state.get('storyLinesCount')).to.be.equal('2');
                    done();
                });
                store.setStoryLinesCount({data: '2'});
            });
        });
    });
});
