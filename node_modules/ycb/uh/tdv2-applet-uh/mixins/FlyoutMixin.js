 'use strict';

var classList = require('dom-classlist');
var React = require('react/addons');

var FLYOUT_TIMEOUT = 140;
var lastHoveredItem = null;

module.exports = {

    contextTypes: {
        executeAction: React.PropTypes.func.isRequired
    },

    toggleMenu: function(e) {
        var target = e.currentTarget;
        var type = e.type;

        setTimeout(function() {
            if (type === 'mouseenter' && target === lastHoveredItem) {
                // Close Nav Rail
                classList(target).add('uh-menu-open');
            } else if (type === 'mouseleave' && target !== lastHoveredItem) {
                classList(target).remove('uh-menu-open');
            }
        }.bind(this), FLYOUT_TIMEOUT);

        if (type === 'mouseenter') {
            lastHoveredItem = target;
        } else {
            lastHoveredItem = null;
        }
    }
};
